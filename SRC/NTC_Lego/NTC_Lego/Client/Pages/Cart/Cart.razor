@page "/cart"
@using NTC_Lego.Shared
@inject HttpClient Http
<PageTitle>Cart</PageTitle>

<h3>Cart</h3>

@if (cartItems == null)
{
    <span>Cart loading...</span>
    
}
else
{
    if(cartItems.Count() < 1)
    {
        <p>Your cart is empty. Would you like to browse the catalog?</p>
        <button>Browse</button>
    }
    else 
    {
        <div>
            @foreach(var ci in cartItems)
            {
                <div class="card p-5 my-2">
                    <p>Item: @ci.CartItemId</p>
                    <p>Quantity: @ci.CartItemQuantity</p>
                </div>
            }
        </div>
    }
}

@code {
    private IEnumerable<CartItem>? cartItems;

    protected override async Task OnInitializedAsync()
    {
        //user authentication checks (get userId of logged in user)
        int UserId = 1;
        cartItems = await Http.GetFromJsonAsync<List<CartItem>>($"/Cart/cartitem?userId={UserId}");
    }
}
